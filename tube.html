<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Upload to DRFTube</title>
</head>
<body>
  <h2>Upload Video to IPFS via Pinata</h2>
  <input type="file" id="fileInput" accept="video/*"><br><br>
  <button onclick="uploadToIPFS()">Upload</button>
  <div id="status"></div>
  <script>
    const PINATA_JWT = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI2YjI3MmJhYy00ZTg5LTQxMzUtOWRlMS1iYzk3OTkzMjBkY2YiLCJlbWFpbCI6ImRpZ2l0YWxydWZpeWFjb2luQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiJjNmZlNzk2ZjY0YjhlNWI3ZDI1NiIsInNjb3BlZEtleVNlY3JldCI6ImNhNmVkZmIyYzJhNjkzNzYwZGY1NWRhNTJlOTkwMWY1Yjk0Y2EzZjE0ZTI0NmQ0ZWJkMjQxNWE3ZjM3YjhkMWUiLCJleHAiOjE3ODE0MjAyNDF9.jTvLgxmAWy9AYsxFHVVaX4e1086fiQ09txSJo_-TyU4";

    async function uploadToIPFS() {
      const fileInput = document.getElementById('fileInput');
      const status = document.getElementById('status');
      if (!fileInput.files.length) {
        status.innerText = '❌ Please select a file first.';
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append("file", file);

      status.innerText = "Uploading to Pinata...";

      try {
        const res = await fetch("https://api.pinata.cloud/pinning/pinFileToIPFS", {
          method: "POST",
          headers: {
            Authorization: `Bearer ${PINATA_JWT}`
          },
          body: formData
        });

        const result = await res.json();
        console.log("Upload response:", result);

        if (result.IpfsHash) {
          const url = `https://gateway.pinata.cloud/ipfs/${result.IpfsHash}`;
          status.innerHTML = `✅ Uploaded: <a href="${url}" target="_blank">${url}</a>`;
        } else {
          status.innerText = "❌ Upload failed: " + JSON.stringify(result);
        }
      } catch (err) {
        console.error("Upload error:", err);
        status.innerText = "❌ Error uploading to IPFS: " + err.message;
      }
    }
  </script>
</body>
</html>
