<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pinata Upload Test</title>
</head>
<body>
  <h2>Pinata File Upload Test</h2>
  <input type="file" id="fileInput" />
  <button id="uploadBtn">Upload to Pinata</button>

  <script>
    const apiKey = '3d87f9ed904df892654c';       // Replace with your Pinata API Key
    const apiSecret = 'a279e8854d44af6cb17047da98aa772a19022aaa20949b137f9fb1027c03bf9f';  // Replace with your Pinata API Secret

    document.getElementById('uploadBtn').onclick = async () => {
      const fileInput = document.getElementById('fileInput');
      if (!fileInput.files.length) {
        alert('Please select a file first');
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append('file', file);

      try {
        const response = await fetch('https://api.pinata.cloud/pinning/pinFileToIPFS', {
          method: 'POST',
          headers: {
            'pinata_api_key': apiKey,
            'pinata_secret_api_key': apiSecret,
          },
          body: formData,
        });

        if (!response.ok) {
          const errorData = await response.json();
          console.error('Pinata upload error:', errorData);
          alert('Upload failed: ' + (errorData.error?.reason || response.statusText));
          return;
        }

        const result = await response.json();
        console.log('Upload successful! IPFS hash:', result.IpfsHash);
        alert('Upload successful! IPFS hash:\n' + result.IpfsHash);
      } catch (error) {
        console.error('Error uploading to Pinata:', error);
        alert('Upload failed: ' + error.message);
      }
    };
  </script>
</body>
</html>
