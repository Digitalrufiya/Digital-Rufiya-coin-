<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/><meta name="viewport"content="width=device-width,initial-scale=1"/>
  <title>DRF Wallet Settings</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body style="font-family:Arial;text-align:center;background:#f4f9fb;padding:20px;">
  <h2>Wallet Settings</h2>
  <p id="addr" style="font-weight:bold;"></p>
  <button onclick="reveal('mnemonic')">Show Secret Phrase</button>
  <p id="mnemonic" style="color:green;"></p>
  <button onclick="reveal('privateKey')">Export Private Key</button>
  <p id="privateKey" style="color:red;"></p>
  <button onclick="resetWallet()" style="margin-top:30px;background:red;color:#fff;">Reset Wallet</button>
  <br/><br/><a href="dashboard.html">‚Üê Back to Dashboard</a>

<script>
let wallet;
async function loadSettings(){
  const enc = sessionStorage.getItem("drf_wallet_json")||localStorage.getItem("drf_encrypted_wallet");
  if(!enc) return location.href="index.html";
  const pw = sessionStorage.getItem("drf_wallet_pw") || prompt("Enter password:");
  wallet = await ethers.Wallet.fromEncryptedJson(enc,pw);
  document.getElementById("addr").innerText="Address: "+wallet.address;
}
function reveal(which){
  if(!wallet) return alert("Locked");
  if(which==="mnemonic") document.getElementById("mnemonic").innerText = wallet.mnemonic.phrase;
  else document.getElementById("privateKey").innerText = wallet.privateKey;
}
function resetWallet(){
  if(confirm("Delete wallet?")){
    localStorage.removeItem("drf_encrypted_wallet");
    sessionStorage.clear();
    alert("Deleted.");
    location.href="index.html";
  }
}
loadSettings();
</script>
</body>
</html>
