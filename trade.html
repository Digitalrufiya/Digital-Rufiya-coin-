<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buy DrF Token - Digital Rufiya Sale</title>
  <meta name="description" content="Buy DRF token securely with USDC. Join Digital Rufiya's token sale." />
  <link rel="icon" href="/logo.png" type="image/png" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- jQuery and Web3 -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>

  <style>
    body {
      background: #f4f7fa;
      color: #333;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .navbar-brand {
      font-weight: 700;
      font-size: 1.8rem;
      letter-spacing: 1px;
    }
    header {
      background: white;
      padding: 3rem 0;
      text-align: center;
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
      margin-bottom: 2rem;
    }
    header img {
      max-width: 80px;
      margin-bottom: 1rem;
    }
    header h1 {
      font-weight: 800;
      font-size: 2.8rem;
      margin-bottom: 0.5rem;
      color: #0d6efd;
    }
    header p.lead {
      font-size: 1.2rem;
      color: #555;
    }
    #switch {
      margin-top: 1rem;
    }
    .info-card {
      border-radius: 10px;
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.07);
      padding: 1.5rem;
      background: white;
      transition: transform 0.3s ease;
    }
    .info-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
    }
    .info-card h5 {
      font-weight: 600;
      color: #0d6efd;
      margin-bottom: 0.75rem;
    }
    #buy input {
      max-width: 400px;
      margin: 0 auto 1rem auto;
      padding: 1rem 1.2rem;
      font-size: 1.1rem;
      border-radius: 12px;
      border: 1.5px solid #ced4da;
      transition: border-color 0.3s ease;
    }
    #buy input:focus {
      border-color: #0d6efd;
      outline: none;
      box-shadow: 0 0 8px #0d6efd66;
    }
    #buyBtn {
      padding: 0.75rem 3rem;
      font-size: 1.15rem;
      border-radius: 50px;
      font-weight: 700;
      transition: background-color 0.3s ease;
    }
    #buyBtn:hover {
      background-color: #0b5ed7;
    }
    #buyStatus {
      margin-top: 1.2rem;
      font-style: italic;
      min-height: 1.5em;
      color: #444;
    }
    #referral {
      background: #e9f0ff;
      padding: 3rem 1rem;
      border-radius: 12px;
      text-align: center;
      max-width: 700px;
      margin: 3rem auto;
      box-shadow: 0 4px 16px rgb(13 110 253 / 0.15);
    }
    #referral h2 {
      color: #0d6efd;
      margin-bottom: 1rem;
      font-weight: 700;
    }
    #referral p {
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
      color: #444;
    }
    #refLink {
      width: 100%;
      max-width: 500px;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      border: 1.5px solid #0d6efd;
      font-weight: 500;
      font-size: 1rem;
      color: #0d6efd;
      user-select: all;
      background: #ffffff;
      margin-bottom: 1rem;
    }
    #referral button {
      border-radius: 50px;
      padding: 0.5rem 2.5rem;
      font-weight: 600;
    }
    footer {
      background: #0d6efd;
      color: white;
      padding: 1.5rem 0;
      text-align: center;
      font-size: 0.9rem;
      margin-top: 4rem;
      user-select: none;
    }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="#">Digital Rufiya</a>
      <div class="ms-auto d-flex align-items-center gap-3">
        <!-- You can add wallet connect button here if you have web3modal or w3m-button -->
        <!-- Placeholder icon -->
        <i class="bi bi-wallet2 fs-4"></i>
      </div>
    </div>
  </nav>

  <header>
    <img src="/logo.png" alt="DrF Logo" />
    <h1>Buy DrF Token</h1>
    <p class="lead">Join the Digital Rufiya revolution. Buy tokens using USDC on Binance Smart Chain.</p>
    <button class="btn btn-outline-primary" id="switch" aria-label="Switch Network">Switch to BSC</button>
  </header>

  <section class="container mb-5">
    <div class="row g-4 text-center">
      <div class="col-md-4">
        <div class="info-card">
          <h5>Token Name</h5>
          <p class="mb-0">Digital Rufiya</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="info-card">
          <h5>Token Symbol</h5>
          <p class="mb-0">DrF</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="info-card">
          <h5>Token Address</h5>
          <p class="text-break mb-0">
            <a href="https://bscscan.com/token/0x82dAa32579728EDAd1b940Ad26f9336845C8A3c7" target="_blank" rel="noopener noreferrer" class="text-decoration-none">
              0x82dAa3...8A3c7 <i class="bi bi-box-arrow-up-right"></i>
            </a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <section id="buy" class="text-center container mb-5">
    <h2 class="mb-4 fw-bold">Buy DrF with USDC</h2>
    <input
      type="number"
      id="buyAmount"
      class="form-control"
      placeholder="Enter amount of DrF tokens"
      min="1"
      step="any"
      aria-label="Enter amount of DrF tokens"
    />
    <button id="buyBtn" class="btn btn-primary mt-3" aria-live="polite" aria-label="Buy DrF tokens">Buy DrF</button>
    <p id="buyStatus" class="mt-3"></p>
  </section>

  <section id="referral">
    <h2>Referral Program</h2>
    <p>Share your referral link and earn extra DrF tokens when others buy using your link.</p>
    <input
      type="text"
      id="refLink"
      readonly
      value="https://yourdomain.com/buy.html?ref=0xYourAddress"
      aria-label="Referral link"
      onclick="this.select();"
    />
    <button class="btn btn-outline-secondary" onclick="copyReferral()" aria-label="Copy referral link">Copy Referral Link</button>
  </section>

  <footer>
    &copy; 2025 Digital Rufiya. All rights reserved.
  </footer>

  <script>
    // ==== Config ====
    const contractAddress = '0x82dAa32579728EDAd1b940Ad26f9336845C8A3c7';
    const tokenSymbol = 'DrF';
    const tokenName = 'Digital Rufiya';

    // Your sale wallet address here (receives USDC)
    const saleRecipient = '0xYourSaleWalletAddressHere';

    // Price rate: 15.42 DrF per 1 USDC
    const drfPerUSDC = 15.42;

    // USDC contract on BSC Mainnet (18 decimals)
    const USDCContractAddress = '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d';

    const USDC_ABI = [
      {
        constant: false,
        inputs: [
          { name: '_to', type: 'address' },
          { name: '_value', type: 'uint256' }
        ],
        name: 'transfer',
        outputs: [{ name: '', type: 'bool' }],
        type: 'function'
      },
      {
        constant: true,
        inputs: [{ name: '_owner', type: 'address' }],
        name: 'balanceOf',
        outputs: [{ name: 'balance', type: 'uint256' }],
        type: 'function'
      }
    ];

    // Switch network to BSC Mainnet
    document.getElementById('switch').addEventListener('click', async () => {
      if (typeof window.ethereum !== 'undefined') {
        try {
          await window.ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: '0x38' }] // BSC Mainnet
          });
          alert('Switched to Binance Smart Chain.');
        } catch (e) {
          alert('Switch failed. Please open MetaMask and manually switch to Binance Smart Chain.');
        }
      } else {
        alert('No wallet detected');
      }
    });

    // Copy referral link to clipboard
    function copyReferral() {
      const ref = document.getElementById('refLink');
      ref.select();
      ref.setSelectionRange(0, 99999); // For mobile devices
      navigator.clipboard.writeText(ref.value).then(() => {
        alert('Referral link copied!');
      }).catch(() => {
        alert('Failed to copy referral link.');
      });
    }

    // Buy button click handler
    document.getElementById('buyBtn').addEventListener('click
