<script src="https://unpkg.com/@walletconnect/core@2.10.6/dist/index.umd.js"></script>
<script src="https://unpkg.com/@walletconnect/utils@2.10.6/dist/index.umd.js"></script>
<script src="https://unpkg.com/@reown/walletkit@latest/dist/index.umd.js"></script>

<script type="module">
  const { WalletKit } = window.walletkit;
  const { Core } = window.WalletConnectCore;

  const core = new Core({
    projectId: '5c53beb0cbc14bcf6d24f38c9bfb7560'
  });

  const metadata = {
    name: 'Digitalrufiya Wallet',
    description: 'Send and receive DRF Tokens',
    url: 'https://digitalrufiya.github.io/Digitalrufiya-wallet/',
    icons: ['https://digitalrufiya.github.io/Digitalrufiya-wallet/logo.png']
  };

  let walletKit;

  async function initWalletKit() {
    walletKit = await WalletKit.init({ core, metadata });
  }

  async function connectWallet() {
    if (!walletKit) {
      await initWalletKit();
    }
    const session = await walletKit.connect();
    const accounts = session.accounts;
    console.log('Connected accounts:', accounts);

    document.getElementById('userAddress').innerText = accounts[0];
    document.getElementById('walletInfo').style.display = 'block';
    document.getElementById('status').innerText = 'Wallet connected!';
  }

  window.addEventListener('DOMContentLoaded', () => {
    document.getElementById('connectButton').addEventListener('click', connectWallet);
  });
</script>
